(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{4148:(e,t,r)=>{Promise.resolve().then(r.bind(r,7230))},7230:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(5155),s=r(2115),n=r(5704);function l(){let e=(0,s.useRef)(null),t=(0,s.useRef)(null),[l,i]=(0,s.useState)(n.env.NEXT_PUBLIC_API_BASE||"http://localhost:8000"),[o,u]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[h,p]=(0,s.useState)(200),[g,f]=(0,s.useState)(!1),[m,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{let a=!1;return(async()=>{let{Map:s}=await r.e(600).then(r.t.bind(r,4606,23));a||(e.current=new s({container:t.current,style:"https://demotiles.maplibre.org/style.json",center:[78.9629,20.5937],zoom:4,attributionControl:!0}))})(),()=>{var t;a=!0,null==(t=e.current)||t.remove(),e.current=null}},[]);let v=async()=>{f(!0),y(null);try{let a=new URL("/collections/addresses/items",l);a.searchParams.set("limit",String(h)),o&&a.searchParams.set("pin",o),d&&a.searchParams.set("city",d);let s=await fetch(a.toString()),n=await s.json();if(!s.ok)throw Error((null==n?void 0:n.error)||"HTTP ".concat(s.status));let i=e.current;if(!i)return;let u="addresses",c="addresses-layer";if(i.getLayer(c)&&i.removeLayer(c),i.getSource(u)?i.getSource(u).setData(n):i.addSource(u,{type:"geojson",data:n}),i.addLayer({id:c,type:"circle",source:u,paint:{"circle-radius":5,"circle-color":"#d61f69","circle-stroke-width":1,"circle-stroke-color":"#ffffff"}}),Array.isArray(null==n?void 0:n.features)&&n.features.length){let e=new(await r.e(600).then(r.t.bind(r,4606,23))).LngLatBounds;for(let r of n.features){var t;if((null==r||null==(t=r.geometry)?void 0:t.type)==="Point"){let[t,a]=r.geometry.coordinates;e.extend([t,a])}}e.isEmpty()||i.fitBounds(e,{padding:40,duration:500})}}catch(e){y(e.message||String(e))}finally{f(!1)}};return(0,a.jsxs)("section",{children:[(0,a.jsx)("h1",{children:"Playground"}),(0,a.jsx)("p",{children:"Visualize API items on a map using MapLibre GL."}),(0,a.jsxs)("div",{style:{display:"grid",gap:8,maxWidth:960,gridTemplateColumns:"1fr 1fr 1fr 120px"},children:[(0,a.jsx)("input",{placeholder:"API Base (https://api.example.org)",value:l,onChange:e=>i(e.target.value)}),(0,a.jsx)("input",{placeholder:"Filter PIN (e.g., 560008)",value:o,onChange:e=>u(e.target.value)}),(0,a.jsx)("input",{placeholder:"Filter City (e.g., Bengaluru)",value:d,onChange:e=>c(e.target.value)}),(0,a.jsx)("input",{type:"number",min:1,max:1e4,value:h,onChange:e=>p(parseInt(e.target.value||"100",10))})]}),(0,a.jsxs)("div",{style:{marginTop:8},children:[(0,a.jsx)("button",{className:"btn",disabled:g,onClick:v,children:g?"Loadingâ€¦":"Load on Map"}),m&&(0,a.jsxs)("span",{style:{color:"crimson",marginLeft:12},children:["Error: ",m]})]}),(0,a.jsx)("div",{ref:t,style:{height:540,marginTop:16,borderRadius:8,overflow:"hidden",border:"1px solid #eee"}})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4148)),_N_E=e.O()}]);